<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0"
          xmlns:cq="http://www.day.com/jcr/cq/1.0"
          xmlns:granite="http://www.adobe.com/jcr/granite/1.0"
          xmlns:sling="http://sling.apache.org/jcr/sling/1.0"
          xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
          jcr:primaryType="sling:Folder">
    <options jcr:primaryType="cq:Page">
        <jcr:content jcr:primaryType="nt:unstructured"
                     jcr:title="Link Inspector options"
                     sling:resourceType="granite/ui/components/shell/page">
            <head jcr:primaryType="nt:unstructured">
                <clientlibs
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/includeclientlibs"
                        categories="[coralui3,granite.ui.coral.foundation,link-inspector-ui]"/>
            </head>
            <title jcr:primaryType="nt:unstructured"
                   sling:resourceType="granite/ui/components/coral/foundation/text"
                   text="Link Inspector options"/>
            <actions jcr:primaryType="nt:unstructured">
                <secondary jcr:primaryType="nt:unstructured">
                    <save
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/coral/foundation/button"
                            type="submit"
                            formId="elc-options-savesettings"
                            granite:title="Save settings"
                            icon="save"
                            text="Save settings"/>
                </secondary>
            </actions>
            <content jcr:primaryType="nt:unstructured"
                     sling:resourceType="granite/ui/components/coral/foundation/container">
                <items jcr:primaryType="nt:unstructured">
                    <columns jcr:primaryType="nt:unstructured"
                             sling:resourceType="granite/ui/components/coral/foundation/fixedcolumns"

                             maximized="{Boolean}true">
                        <items jcr:primaryType="nt:unstructured">
                            <form jcr:primaryType="nt:unstructured"
                                  granite:class="options-page"
                                  sling:resourceType="granite/ui/components/coral/foundation/form"
                                  granite:id="elc-options-savesettings"
                                  method="post"
                                  foundationForm="true"
                                  dataPath="/conf/etoolbox-link-inspector/data/optionsconfig"
                                  action="/conf/etoolbox-link-inspector/data/optionsconfig"
                                  style="vertical">
                                <items jcr:primaryType="nt:unstructured">
                                    <tabs jcr:primaryType="nt:unstructured"
                                          maximized="{Boolean}true"
                                          size="L"
                                          sling:resourceType="granite/ui/components/coral/foundation/tabs">
                                        <main jcr:primaryType="nt:unstructured"
                                              sling:resourceType="granite/ui/components/coral/foundation/container"
                                              jcr:title="Main Config"
                                              maximized="{Boolean}true">
                                            <items jcr:primaryType="nt:unstructured">
                                                <replacement
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                                        fieldLabel="Path"
                                                        fieldDescription="The content path for searching broken links. The search path should be located under /content"
                                                        required="{Boolean}true"
                                                        name="./replacement"
                                                        rootPath="/content"/>
                                                <excludedPaths
                                                        granite:class="foundation-layout-util-maximized-alt"
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/multifield"
                                                        fieldLabel="Excluded Paths"
                                                        fieldDescription="The list of paths excluded from processing. The specified path and all its children are excluded. The excluded path should not end with slash. Can be specified as a regex">
                                                    <field
                                                            jcr:primaryType="nt:unstructured"
                                                            sling:resourceType="granite/ui/components/coral/foundation/form/pathfield"
                                                            rootPath="/content"
                                                            name="./excludedPaths">
                                                    </field>
                                                </excludedPaths>
                                                <activatedContent
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/checkbox"
                                                        name="./activatedContent"
                                                        text="Activated Content"
                                                        fieldDescription="If checked, links will be retrieved from activated content only"
                                                        uncheckedValue="{Boolean}false"
                                                        checked="{Boolean}false"
                                                        value="{Boolean}true"/>
                                                <skipContentAfterActivation
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/checkbox"
                                                        name="./skipContentAfterActivation"
                                                        text="Skip non-published content and content changed after publishing"
                                                        fieldDescription="Works in conjunction with the 'Activated Content' checkbox only. If checked, links will be retrieved from activated content that is not modified after activation (lastModified is before lastReplicated)"
                                                        uncheckedValue="{Boolean}false"
                                                        checked="{Boolean}false"
                                                        value="{Boolean}true"/>
                                                <excludedLinkPatterns
                                                        granite:class="foundation-layout-util-maximized-alt"
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/multifield"
                                                        fieldLabel="Excluded links patterns"
                                                        fieldDescription="Links are excluded from processing if they match any of the specified regex patterns">
                                                    <field
                                                            jcr:primaryType="nt:unstructured"
                                                            sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                                            name="./excludedLinkPatterns">
                                                    </field>
                                                </excludedLinkPatterns>
                                                <lastModified
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/datepicker"
                                                        fieldLabel="Last Modified"
                                                        fieldDescription="The content modified before the specified date will be excluded. Tha date should has the ISO-like date-time format, such as '2011-12-03T10:15:30+01:00')"
                                                        name="./lastModified"/>
                                                <excludedProperties
                                                        granite:class="foundation-layout-util-maximized-alt"
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/multifield"
                                                        fieldLabel="Excluded Properties"
                                                        fieldDescription="The list of properties excluded from processing. Each value can be specified as a regex">
                                                    <field
                                                            jcr:primaryType="nt:unstructured"
                                                            sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                                            name="./excludedProperties">
                                                    </field>
                                                </excludedProperties>

                                                <linkTypes
                                                        jcr:primaryType="nt:unstructured"
                                                        jcr:title="Links type (The type of links in the report)"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/fieldset">

                                                        <datasource jcr:primaryType="nt:unstructured"
                                                                    sling:resourceType="/bin/etoolbox/link-inspector/settings/linktypes"/>

                                                </linkTypes>
                                                <allowCustomLinkTypes
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/checkbox"
                                                        name="./customTypeAllowed"
                                                        text="Allow custom link type"
                                                        fieldDescription="If checked custom link types will be included in the reports"
                                                        uncheckedValue="{Boolean}false"
                                                        checked="{Boolean}false"
                                                        value="{Boolean}true"/>
                                                <statusCodes
                                                        granite:class="foundation-layout-util-maximized-alt"
                                                        jcr:primaryType="nt:unstructured"
                                                        sling:resourceType="granite/ui/components/coral/foundation/form/multifield"
                                                        fieldLabel="Status codes"
                                                        fieldDescription="The list of status codes allowed for broken links in the report. Set a single negative value to allow all http error codes">
                                                    <field
                                                            jcr:primaryType="nt:unstructured"
                                                            sling:resourceType="granite/ui/components/coral/foundation/form/numberfield"
                                                            name="./statusCodes">
                                                    </field>
                                                </statusCodes>

                                            </items>
                                        </main>
                                        <advanced jcr:primaryType="nt:unstructured"
                                                  sling:resourceType="granite/ui/components/coral/foundation/container"
                                                  jcr:title="Advanced Config"
                                                  margin="{Boolean}true"
                                                  maximized="{Boolean}true">
                                            <items jcr:primaryType="nt:unstructured"
                                                   sling:resourceType="granite/ui/components/coral/foundation/container">
                                                <text jcr:primaryType="nt:unstructured"
                                                      sling:resourceType="granite/ui/components/coral/foundation/form/numberfield"
                                                      fieldLabel="Threads per core"
                                                      fieldDescription="The number of threads created per each CPU core for validating links in parallel"
                                                      defaultValuestring="60"
                                                      name="./threadsPerCore">
                                                </text>
                                            </items>
                                        </advanced>
                                        <datasource jcr:primaryType="nt:unstructured"
                                                    sling:resourceType="/bin/etoolbox/link-inspector/settings"/>
                                    </tabs>
                                </items>
                            </form>
                        </items>
                    </columns>
                </items>
            </content>
        </jcr:content>
    </options>
</jcr:root>